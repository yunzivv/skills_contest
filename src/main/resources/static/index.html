<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>로그인</title>
</head>
<body style="margin:0;padding:0;">
<div style="width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:#eee;">
    <div style="width:30%;height:40%;margin-bottom:50px;text-align:center;padding:30px 100px;font-size:1.5rem;border-radius:30px;background:#fff;">
        <div style="height:30%;font-size:2rem;">관리자 로그인</div>

        <form action="/api/login" method="post" style="height:70%;display:flex;flex-direction:column;justify-content:center;gap:10px;">
            <div style="height:30%;display:flex;align-items:center;">
                <div style="width:40%;text-align:left;">이름</div>
                <input name="name" style="width:60%;padding:10px;" type="text" required>
            </div>
            <div style="height:30%;display:flex;align-items:center;">
                <div style="width:40%;text-align:left;">비밀번호</div>
                <input name="passwd" style="width:60%;padding:10px;" type="password" required>
            </div>

            <div id="msg" style="font-size:1rem;height:30px;color:red;text-align:center;"></div>

            <div style="height:40%;display:flex;justify-content:center;align-items:end;gap:10px;">
                <input type="submit" value="확인" style="padding:10px 30px;font-size:1.2rem;background:#1e5eff;color:#fff;border-radius:10px;border:none;">
                <input type="button" value="닫기" onclick="window.close()" style="padding:10px 30px;font-size:1.2rem;background:lightgray;border-radius:10px;border:none;">
            </div>
        </form>
    </div>
</div>

<script>
    const form = document.querySelector('form'), msg = document.getElementById('msg');
    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        if (!form.reportValidity()) return;

        const body = new URLSearchParams(new FormData(form));
        const res  = await fetch(form.action, {
            method:'POST',
            headers:{'Content-Type':'application/x-www-form-urlencoded'}, body });

        const ct = res.headers.get('content-type')||'';
        const ok = ct.includes('application/json') ? await res.json() : (await res.text()).trim()==='true';

        if (ok) location.href = '/management.html';
        else msg.textContent = '존재하지 않는 회원입니다.';
    });
</script>
</body>
</html>
